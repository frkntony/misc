<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="abstract" content="This three-step guide shows how applications can replace context.xml with web.xml."/>
<meta name="description" content="This three-step guide shows how applications can replace context.xml with web.xml."/>

<link rel="stylesheet" type="text/css" href="../css/documentation.css"/>
<title>Migrating Web Applications That Use context.xml</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->
</head>
<body class="" id="loioe72bd30dbb571014a4dce59933d8c069">
<div id="wrapper"><div id="container">
<h1 class="title topictitle1">Migrating Web Applications That Use
	 context.xml</h1>

	<div class="body conbody"><p class="shortdesc">This three-step guide shows how applications can replace context.xml with
		web.xml.</p>
<div class="section" id="loioe72bd30dbb571014a4dce59933d8c069__section_CFACA8EC31FE4E0798E4CD5DA7E7165E"><div class="section_title">Overview</div><div type="Overview"> 
		 
		<div class="p">Earlier versions of the persistence tutorials used <span class="ph filepath">context.xml</span> to declare
				a reference to the default data source provided by the persistence service. The
				tutorials have since been adapted to include the resource reference description in
				the <span class="ph filepath">web.xml</span> deployment descriptor, in accordance with the Java
				EE Specification, as follows:
				<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">
  &lt;resource-ref&gt;
      &lt;res-ref-name&gt; NAME &lt;/res-ref-name&gt;
      &lt;res-type&gt; TYPE &lt;/res-type&gt;
  &lt;/resource-ref&gt;
</pre></div>

			</div>
 
		<p class="p">If you have Web applications that use <span class="ph filepath">context.xml</span>, you are advised to
				switch to <span class="ph filepath">web.xml</span> as soon as possible by completing the
				migration steps described below. The use of <span class="ph filepath">context.xml</span> is no
				longer supported. </p>
 
	 </div></div>
<div class="section" id="loioe72bd30dbb571014a4dce59933d8c069__section_7D34A112C30344DBA0D0E41AA222E7D7"><div class="section_title">Procedure</div><div type="Procedure"> 
		 
		<ol class="ol"><li class="li">Open the <span class="ph filepath">context.xml</span> file in the <span class="ph filepath">WebContent/META-INF</span>
					folder of your Web application project. You should see the following with
					similar values (the values shown below are based on the tutorials): <div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">
    &lt;Resource name="jdbc/DefaultDB"
              auth="Container"
              type="javax.sql.DataSource"
              factory="com.sap.jpaas.service.persistence.core.JNDIDataSourceFactory"/&gt;
</pre></div>

					<p class="p">You require the resource name and type values in the next step. </p>

				</li>
<li class="li">Add the resource reference description to the <span class="ph filepath">web.xml</span> file: <ol class="ol" type="a">
						<li class="li">Open <span class="ph filepath">web.xml</span> in the
								<span class="ph filepath">WebContent/WEB-INF</span> folder of your Web
							application project. </li>

						<li class="li">Insert the following content after the
								<samp class="ph codeph">&lt;servlet-mapping&gt;</samp> elements:
							<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">
  &lt;resource-ref&gt;
      &lt;res-ref-name&gt;NAME&lt;/res-ref-name&gt;
      &lt;res-type&gt;TYPE&lt;/res-type&gt;
  &lt;/resource-ref&gt;
</pre></div>

						</li>

						<li class="li">Replace the values for the resource name and type with those from step
							1, as shown in the example below, and save:
							<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint">
  &lt;resource-ref&gt;
      &lt;res-ref-name&gt;jdbc/DefaultDB&lt;/res-ref-name&gt;
      &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;
  &lt;/resource-ref&gt;
</pre></div>

						</li>

					</ol>

				</li>
<li class="li">Delete <span class="ph filepath">context.xml</span> from the <span class="ph filepath">WebContent/META-INF</span> folder
					of your Web application project. </li>
</ol>
 
	 </div></div>
</div>

	<div class="related-links"> 
<div class="relinfo"><div class="relinfotitle ">Related Information</div>
<div><a class="link" href="e4aeacd2bb5710148ee99255136d96a5.html" title="This step-by-step tutorial shows how you can use JPA to apply application-managed persistence in a simple Java EE web application that manages a list of persons.">Adding Application-Managed Persistence with JPA (Java Web SDK)</a></div>
<div><a class="link" href="e4c52854bb571014aeb88753d0dad158.html" title="This step-by-step tutorial shows how you can use JDBC to persist data in a simple Java EE web application that manages a list of persons.">Adding Persistence with JDBC (Java Web SDK)</a></div>
</div>
</div></div></div><div class="footer" id="custom-footer">
	<div id="custom-footerSpacer"><hr width="350px" align="left"/></div>
	<a class="copyright" href="copyright.html">Copyright</a><span class="separator"> | </span><a class="disclaimer" href="disclaimer.html">Important Disclaimers and Legal Information</a>
</div>

</body>
</html>